<div *ngIf="varsGlobal.language.includes('Francais')">
  <hr style="border: 1px dotted black"/>
  <div *ngIf="modeHistoire==1">
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4">
        <button (click)="onHistoire()" class="btn btn-link">NouvelleAppel</button>    
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <button (click)="onRefresh()" class="btn btn-link">Refresh</button>    
      </div>
    </div>
    <hr style="border: 1px dotted black"/>
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: green; text-align: center">
        Appels en Attente
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: orange; text-align: center">
        Appels en Cours
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: red; text-align: center">
        Appels Finis
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>Numero</th><th (click)='onSortDate(listRqs)'>DateReserve</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrs" style="color: green; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>Numero</th><th (click)='onSortDate(listTrsSent)'>DateReserve</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrsSent" style="color:orange; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>Numero</th><th (click)='onSortDate(listTrsFini)'>DateReserve</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrsFini" style="color: red; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <button (click)="printBonDeTransport('toprint')" class="btn btn-link">Print</button>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button (click)="onFermer()" class="btn btn-link" >Fermer</button>
  </div>
    
  <br>

  <div id="toprint" *ngIf="modeHistoire==-1">
    <table border='1' style="font-size: 12pt; margin-inline: 5px; width: 19cm">
      <tr>
        <td style="text-align: center; text-anchor: start; width: 22%">Heure d'Appel <br> <span>&nbsp;{{transport.dateDepart | date: 'dd-MMM-yyyy'}} - {{transport.timeCall}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%">Repartiteur <br> <span>&nbsp;{{transport.nomDispatch}}</span></td>
        <td style="text-align: center; text-anchor: start; font-size: 13pt; background-color: darkgray; width: 20%">Chauffeur <br> <span>&nbsp;{{transport.nomIntervenant}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%"># PO <br> <span>&nbsp;{{transport.numPO}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 18%"># Bon <br> <span>&nbsp;{{transport.id}}</span></td>
      </tr>
      <tr>
        <th style="text-align: center; text-anchor: start; width: 22%; font-size: 13pt; background-color: darkgray">Heure Reservation <br> {{transport.dateReserve | date : 'dd-MMM-yyyy'}} - {{transport.timeResrvation}}</th>
        <td style="text-align: center; text-anchor: start; width: 20%"># Camion <br> <span>&nbsp;{{transport.camionAttribue}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%">Type d'Equipement<br> <span>&nbsp;{{transport.typeCamion}}</span></td>
        <!-- <td style="text-align: center; text-anchor: start;; width: 38%" colspan="2">$ Montant $ <br> <span *ngIf="transport.fini||transport.sent">&nbsp;{{transport.total | number : '1.2'}}</span></td> -->
        <td style="text-align: center; text-anchor: start;; width: 38%" colspan="2">$ SubTotal $ <br> <span>&nbsp;</span></td> <!--{{transport.total | number : '1.2'}}-->
      </tr>
      <tr>
        <td colspan="5"><span style="text-decoration-line: underline">Client:</span>
          <span>&nbsp;{{transport.nomEntreprise}} <br> </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"Commande par: " + transport.nomContact}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Tel: " + transport.telContact}}</span>
          <span *ngIf="transport.extTelContact.length>0" style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;{{"Ext: " + transport.extTelContact}}</span>
        </td>  
      </tr>

      <tr>
        <td colspan="5">
            <span style="text-decoration-line: underline">De:</span><span>&nbsp;{{transport.origin}}</span> <br> &nbsp;
          <span style="font-size: 11pt; font-style: italic">Contact: </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;{{transport.nomClient}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Tel: " + transport.telClient}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Tel: " + transport.telClient2em}}</span>
        </td>
      </tr>
      <tr>
        <td colspan="5">
            <span style="text-decoration-line: underline">A:</span><span>&nbsp;{{transport.destination}}</span> <br> &nbsp;
          <span style="font-size: 11pt; font-style: italic">Contact: </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;{{transport.contactDest}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Tel: " + transport.tel1Dest}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Tel: " + transport.tel2Dest}}</span>
        </td>
      </tr>
      <tr>
        <th colspan="5"style="text-align: center; text-anchor: start ">
            <span>Loads Liste</span>
        </th>
      </tr>
    </table>
    <table border='1' style="font-size: 12pt; margin-inline: 5px; width: 19cm">
      <tr *ngIf="mode==1">
        <th style="width: 10%">Quantites</th>
        <th style="width: 50%">Description</th>
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th colspan="3" style="text-align: center">Dimension</th>
            </tr>
            <tr>
              <td style="width: 34%">Long(po)</td>
              <td style="width: 33%">Larg(po)</td>
              <td style="width: 33%">Haut(po)</td>
            </tr>
          </table>
        </td>
        <td style="width: 10%">Poids(lb)</td>                        
      </tr>
      <tr *ngIf="mode==2">
        <th style="width: 10%">Quantites</th>
        <th style="width: 50%">Description</th>
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th colspan="3" style="text-align: center">Dimension</th>
            </tr>
            <tr>
              <td style="width: 34%">Long(cm)</td>
              <td style="width: 33%">Larg(cm)</td>
              <td style="width: 33%">Haut(cm)</td>
            </tr>
          </table>
        </td>
        <td style="width: 10%">Poids(kg)</td>                        
      </tr>
      <tr *ngFor="let load of loadDetails">
        <td style="text-align: center; width: 10%">{{load.quantity}}</td>
        <td style="width: 50%">{{load.description}}</td> 
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <td style="width: 34%; text-align: right">{{load.longueur}}</td>
              <td style="width: 33%; text-align: right">{{load.largeur}}</td>
              <td style="width: 33%; text-align: right">{{load.hauteur}}</td>      
            </tr>
          </table>
        </td>
        <td style="text-align: right; width: 10%">{{load.poids}}</td>
      </tr>
      <tr>

        <th colspan="2" style="text-align: right; width: 60%">{{"Total longueur et poids : "}}</th> 
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th style="width: 34%; text-align: right">{{transport.longueur}}</th>
              <td style="width: 33%; text-align: center">{{" "}}</td>
              <td style="width: 33%; text-align: center">{{" "}}</td>      
            </tr>
          </table>
        </td>
        <th style="text-align: right; width:10%">{{transport.poids}}</th>
      </tr> 

      <tr> 
        <td colspan="5"style="text-align: left; text-anchor: start ">
            <span style="text-decoration-line: underline">Plus infos :</span> <span>&nbsp;{{transport.comments}} <br>&nbsp;</span>
        </td>
      </tr>
      <tr> 
        <td colspan="5"style="text-align: left; text-anchor: start ">
            <span style="text-decoration-line: underline">Note au Chauffeur:</span> <span>&nbsp;{{transport.driverNote}} <br>&nbsp;</span>
        </td>
      </tr>
      <tr *ngIf="transport.signature.length>0">
        <td colspan="5"style="text-align: left; text-anchor: start ">
          <h5>Signature: </h5>
          <img [src]="transport.signature" height="100" width="250" >
          <h5>{{"NOM EN LETTRES MOULEES : " + transport.nomSignature}}</h5> 
          <!-- <span>&nbsp;<br>&nbsp;</span> -->
        </td>
      </tr>
    </table>
  </div>
</div>

<div *ngIf="varsGlobal.language.includes('English')">
  <hr style="border: 1px dotted black"/>
  <div *ngIf="modeHistoire==1">
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4">
        <button (click)="onHistoire()" class="btn btn-link">NewLoad</button>    
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <button (click)="onRefresh()" class="btn btn-link">Refresh</button>    
      </div>
    </div>
    <hr style="border: 1px dotted black"/>
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: green; text-align: center">
        Loads in Pending
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: orange; text-align: center">
        Loads in Progress
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4" style="color: red; text-align: center">
        Loads Finished
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>#Num</th><th (click)='onSortDate(listRqs)'>Reservation</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrs" style="color: green; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>#Num</th><th (click)='onSortDate(listTrsSent)'>Reservation</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrsSent" style="color:orange; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-sm-4 col-lg-4">
        <table class="table">
          <tr style="background-color: whitesmoke">
            <th>#Num</th><th (click)='onSortDate(listTrsFini)'>Reservation</th><th>Client</th>
          </tr>
          <tr *ngFor="let t of listTrsFini" style="color: red; background-color: whitesmoke">
            <td (click)="gotoDetailTransport(t)">{{t.id}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.dateReserve}}</td>
            <td (click)="gotoDetailTransport(t)">{{t.nomEntreprise}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <button (click)="printBonDeTransport('toprint')" class="btn btn-link">Print</button>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button (click)="onFermer()" class="btn btn-link" >Close</button>
  </div>
    
  <br>

  <div id="toprint" *ngIf="modeHistoire==-1">
    <table border='1' style="font-size: 12pt; margin-inline: 5px; width: 19cm">
      <tr>
        <td style="text-align: center; text-anchor: start; width: 22%">TimeCall <br> <span>&nbsp;{{transport.dateDepart | date: 'dd-MMM-yyyy'}} - {{transport.timeCall}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%">Dispatch <br> <span>&nbsp;{{transport.nomDispatch}}</span></td>
        <td style="text-align: center; text-anchor: start; font-size: 13pt; background-color: darkgray; width: 20%">Driver <br> <span>&nbsp;{{transport.nomIntervenant}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%">#PO <br> <span>&nbsp;{{transport.numPO}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 18%">#Num <br> <span>&nbsp;{{transport.id}}</span></td>
      </tr>
      <tr>
        <th style="text-align: center; text-anchor: start; width: 22%; font-size: 13pt; background-color: darkgray">Reservation <br> {{transport.dateReserve | date : 'dd-MMM-yyyy'}} - {{transport.timeResrvation}}</th>
        <td style="text-align: center; text-anchor: start; width: 20%">#Truck <br> <span>&nbsp;{{transport.camionAttribue}}</span></td>
        <td style="text-align: center; text-anchor: start; width: 20%">EquipementType<br> <span>&nbsp;{{transport.typeCamion}}</span></td>
        <!-- <td style="text-align: center; text-anchor: start;; width: 38%" colspan="2">$ SubTotal $ <br> <span *ngIf="transport.fini||transport.sent">&nbsp;{{transport.total | number : '1.2'}}</span></td> -->
        <td style="text-align: center; text-anchor: start;; width: 38%" colspan="2">$ SubTotal $ <br> <span>&nbsp;</span></td> <!--{{transport.total | number : '1.2'}}-->
      </tr>
      <tr>
        <td colspan="5"><span style="text-decoration-line: underline">Client:</span>
          <span>&nbsp;{{transport.nomEntreprise}} <br> </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"Ordered by: " + transport.nomContact}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Phone: " + transport.telContact}}</span>
          <span *ngIf="transport.extTelContact.length>0" style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;{{"Ext: " + transport.extTelContact}}</span>
        </td>  
      </tr>

      <tr>
        <td colspan="5">
            <span style="text-decoration-line: underline">From:</span><span>&nbsp;{{transport.origin}}</span> <br> &nbsp;
          <span style="font-size: 11pt; font-style: italic">Contact: </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;{{transport.nomClient}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Phone: " + transport.telClient}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Phone: " + transport.telClient2em}}</span>
        </td>
      </tr>
      <tr>
        <td colspan="5">
            <span style="text-decoration-line: underline">To:</span><span>&nbsp;{{transport.destination}}</span> <br> &nbsp;
          <span style="font-size: 11pt; font-style: italic">Contact: </span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;{{transport.contactDest}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Phone: " + transport.tel1Dest}}</span>
          <span style="font-size: 11pt; font-style: italic">&nbsp;&nbsp;&nbsp;{{"- Phone: " + transport.tel2Dest}}</span>
        </td>
      </tr>
      <tr>
        <th colspan="5"style="text-align: center; text-anchor: start ">
            <span>Loads List</span>
        </th>
      </tr>
    </table>
    <table border='1' style="font-size: 12pt; margin-inline: 5px; width: 19cm">
      <tr *ngIf="mode==1">
        <th style="width: 10%">Quantity</th>
        <th style="width: 50%">Description</th>
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th colspan="3" style="text-align: center">Dimension</th>
            </tr>
            <tr>
              <td style="width: 34%">Length(ft)</td>
              <td style="width: 33%">Width(ft)</td>
              <td style="width: 33%">Height(ft)</td>
            </tr>
          </table>
        </td>
        <td style="width: 10%">Weight(lb)</td>                        
      </tr>
      <tr *ngIf="mode==2">
        <th style="width: 10%">Quantity</th>
        <th style="width: 50%">Description</th>
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th colspan="3" style="text-align: center">Dimension</th>
            </tr>
            <tr>
              <td style="width: 34%">Length(cm)</td>
              <td style="width: 33%">Width(cm)</td>
              <td style="width: 33%">Height(cm)</td>
            </tr>
          </table>
        </td>
        <td style="width: 10%">Weight(kg)</td>                        
      </tr>
      <tr *ngFor="let load of loadDetails">
        <td style="text-align: center; width: 10%">{{load.quantity}}</td>
        <td style="width: 50%">{{load.description}}</td> 
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <td style="width: 34%; text-align: right">{{load.longueur}}</td>
              <td style="width: 33%; text-align: right">{{load.largeur}}</td>
              <td style="width: 33%; text-align: right">{{load.hauteur}}</td>      
            </tr>
          </table>
        </td>
        <td style="text-align: right; width: 10%">{{load.poids}}</td>
      </tr>
      <tr>

        <th colspan="2" style="text-align: right; width: 60%">{{"Total length and weight : "}}</th> 
        <td colspan="2" style="width: 30%">
          <table border='1' style="font-size: 11pt; margin: 0px; width: 57mm">
            <tr>
              <th style="width: 34%; text-align: right">{{transport.longueur}}</th>
              <td style="width: 33%; text-align: center">{{" "}}</td>
              <td style="width: 33%; text-align: center">{{" "}}</td>      
            </tr>
          </table>
        </td>
        <th style="text-align: right; width:10%">{{transport.poids}}</th>
      </tr> 

      <tr> 
        <td colspan="5"style="text-align: left; text-anchor: start ">
            <span style="text-decoration-line: underline">More Infos :</span> <span>&nbsp;{{transport.comments}} <br>&nbsp;</span>
        </td>
      </tr>
      <tr> 
        <td colspan="5"style="text-align: left; text-anchor: start ">
            <span style="text-decoration-line: underline">Note to Driver:</span> <span>&nbsp;{{transport.driverNote}} <br>&nbsp;</span>
        </td>
      </tr>
      <tr *ngIf="transport.signature.length>0">
        <td colspan="5"style="text-align: left; text-anchor: start ">
          <h5>Signature: </h5>
          <img [src]="transport.signature" height="100" width="250" >
          <h5>{{"NAME IN BLOCK LETTERS : " + transport.nomSignature}}</h5> 
          <!-- <span>&nbsp;<br>&nbsp;</span> -->
        </td>
      </tr>
    </table>
  </div>
</div>